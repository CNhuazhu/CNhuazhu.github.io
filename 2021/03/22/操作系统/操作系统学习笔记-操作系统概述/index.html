<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>操作系统学习笔记-操作系统概述 | 花猪のBlog</title><meta name="keywords" content="操作系统"><meta name="author" content="花猪,2296412185@qq.com"><meta name="copyright" content="花猪"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="记录操作系统学习历程">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统学习笔记-操作系统概述">
<meta property="og:url" content="https://cnhuazhu.top/2021/03/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/index.html">
<meta property="og:site_name" content="花猪のBlog">
<meta property="og:description" content="记录操作系统学习历程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png">
<meta property="article:published_time" content="2021-03-22T15:34:28.000Z">
<meta property="article:modified_time" content="2021-06-22T13:17:01.973Z">
<meta property="article:author" content="花猪">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg"><link rel="canonical" href="https://cnhuazhu.top/2021/03/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/butterfly/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/butterfly/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":60,"languages":{"author":"作者: 花猪","link":"链接: ","source":"来源: 花猪のBlog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#ABADAC","bgDark":"#121212","position":"bottom-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '操作系统学习笔记-操作系统概述',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-06-22 21:17:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/css/tag.css"><link rel="stylesheet" href="/css/pagelucency.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/css/avatarbg.css"><link rel="stylesheet" href="/css/footerlucency.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/macblack.css"><link rel="stylesheet" href="/css/mouse.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/butterfly/atom.xml" title="花猪のBlog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/butterfly/archives/"><div class="headline">文章</div><div class="length-num">82</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/butterfly/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/butterfly/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/butterfly/blog-LeadPage/"><i class="fa-fw fas fa-gift"></i><span> 引导</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-sitemap"></i><span> 分站</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/next/"><i class="fa-fw fas fa-chevron-right"></i><span> Next</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/butterfly/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/butterfly/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/butterfly/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/butterfly/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/butterfly/books/"><i class="fa-fw fas fa-book"></i><span> 阅读</span></a></li><li><a class="site-page child" href="/butterfly/movies/"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/butterfly/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page child" href="/butterfly/artitalk/"><i class="fa-fw fas fa-quote-left"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/butterfly/website/"><i class="fa-fw fas fa-globe"></i><span> 网站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/butterfly/Message/"><i class="fa-fw fas fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/butterfly/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog_name"><a id="site-name" href="/butterfly/">花猪のBlog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/butterfly/blog-LeadPage/"><i class="fa-fw fas fa-gift"></i><span> 引导</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-sitemap"></i><span> 分站</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/next/"><i class="fa-fw fas fa-chevron-right"></i><span> Next</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/butterfly/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/butterfly/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/butterfly/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/butterfly/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/butterfly/books/"><i class="fa-fw fas fa-book"></i><span> 阅读</span></a></li><li><a class="site-page child" href="/butterfly/movies/"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/butterfly/video/"><i class="fa-fw fa fa-video"></i><span> 视频</span></a></li><li><a class="site-page child" href="/butterfly/artitalk/"><i class="fa-fw fas fa-quote-left"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterfly/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/butterfly/website/"><i class="fa-fw fas fa-globe"></i><span> 网站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/butterfly/Message/"><i class="fa-fw fas fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/butterfly/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">操作系统学习笔记-操作系统概述</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-22T15:34:28.000Z" title="发表于 2021-03-22 23:34:28">2021-03-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-06-22T13:17:01.973Z" title="更新于 2021-06-22 21:17:01">2021-06-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/butterfly/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>24分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="操作系统学习笔记-操作系统概述"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>前言</h1>
<p><em>正在学习操作系统，记录笔记。</em></p>
<blockquote>
<p>参考资料：</p>
<p>《操作系统（精髓与设计原理 第6版）</p>
</blockquote>
<hr>
<h1>第二章：操作系统概述</h1>
<h2 id="操作系统的目标和功能">操作系统的目标和功能</h2>
<h3 id="操作系统定义">操作系统定义</h3>
<p>操作系统是一组控制应用程序执行的程序，并充当应用程序和计算机硬件之间的接口。（A group of program that controls the execution of application programs. Acts as an interface between applications and hardware）</p>
<blockquote>
<p>无操作系统也可以使用计算机，但是操作十分复杂，只有受过相当训练的专业人士才可以使用。</p>
</blockquote>
<p>操作系统的目标：</p>
<ul>
<li>方便（Convenience）：使计算机更易于使用。</li>
<li>有效（Efficiency）：允许以更有效地方式使用计算机系统资源。</li>
<li>扩展能力（Ability to evolve ）：允许在不妨碍服务的前提下有效地开发、测试和引入新的系统功能。</li>
</ul>
<h3 id="操作系统作为用户与计算机的接口">操作系统作为用户与计算机的接口</h3>
<p>我们先来看一下计算机系统的层次：</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B1%82%E6%AC%A1.png" alt=""></p>
<blockquote>
<p>自上向下看：终端用户一般不会去考虑底层的硬件细节，只需要操作不同的应用程序就好。开发应用的工作由程序员完成，如果需要用一组完全负责控制计算机硬件的机器指令开发应用程序是一件极其复杂的事。为了简化这一开发过程，需要一些系统程序（其中一部分就称为实用工具，Utilities），提供一些如创建程序、管理文件、控制I/O设备功能的接口。最重要的系统程序就是操作系统，它为程序员屏蔽了硬件细节，并为程序员提供各种便于开发的接口。</p>
</blockquote>
<p>操作系统为开发者提供各种服务的接口，以便于更容易地访问和使用以下7类服务：</p>
<ul>
<li>程序开发（Program development）：操作系统提供各种工具以及服务（如：编辑器、调试器…）用于帮助开发程序。（并不属于操作系统核心的一部分）</li>
<li>程序执行（Program execution）：程序运行需要很多步骤——把指令和数据载入内存、为其分配CPU资源、将运行结果保存到外部、释放CPU资源。这一系列的步骤需要操作系统全程参与，做好调度工作。</li>
<li>I/O设备访问（Access to I/O devices）：每个I/O设备的操作都需要特有的指令集或者控制信号，操作系统为此提供了统一的接口，以便使用。</li>
<li>文件访问控制（Controlled access to files）：对于有多个用户的系统，操作系统可以提供保护机制来控制对文件的访问。</li>
<li>系统访问（System access）：对于共享或公共的系统，操作系统可以控制特殊资源的访问（授权/非授权），以此对资源和数据进行保护。</li>
<li>错误检测和响应（Error detection and response）：计算机系统运行可能发生各种错误（包括软件和硬件），对于这些错误操作系统都必须要能检测并且提供响应，以便解决问题。</li>
<li>审计（Accounting）：操作系统可以查看各种资源的使用情况，以便于及时调整，提高性能。</li>
</ul>
<h3 id="操作系统作为资源管理者">操作系统作为资源管理者</h3>
<p>一台计算机就是一组资源，这些资源用于对数据的移动、存储和处理，以及对这些功能的控制。而操作系统负责管理这些资源。</p>
<ul>
<li>
<p>操作系统负责管理资源/硬件。</p>
</li>
<li>
<p>工作方式与其他普通的计算机软件一样，操作系统也是由处理器执行的一段程序或一组程序。</p>
</li>
<li>
<p>操作系统经常会释放控制，并且必须依赖处理器才能恢复控制</p>
<blockquote>
<p>操作系统本质也是一组计算机程序，它可以通过管理计算机资源，从而控制计算机的基本功能。（所以从某种意义上来讲，是操作系统在控制各种数据的移动、存储和处理）。但是它与一般的计算机软件不同的地方在于，操作系统可以主动获取或释放CPU资源。</p>
</blockquote>
</li>
</ul>
<p>操作系统中有一部分常驻于内存中，称之为<strong>内核</strong>（Kernel，也称<strong>核子</strong>，Nucleus）。内核程序包含操作系统中最常使用的功能。</p>
<blockquote>
<p>内存的其余部分包含用户程序和数据，它的分配由操作系统和处理器中的存储管理硬件联合控制。操作系统决定在程序运行过程中何时使用I/O设备，并控制文件的访问和使用。处理器自身也是一个资源，操作系统必须决定在运行一个特定的用户程序时，可以分配多少处理器时间，在多处理器系统中，这个决定要传到所有的处理器。</p>
</blockquote>
<p>下图展示了由操作系统管理的主要资源：</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E8%B5%84%E6%BA%90.png" alt=""></p>
<h3 id="操作系统的易扩展性">操作系统的易扩展性</h3>
<p>一个重要的操作系统应该能够不断发展，其原因如下：</p>
<ul>
<li>
<p>硬件升级和新型硬件的出现：</p>
<p>例如，图形终端和页面式终端代替了行滚动终端；图形终端允许允许用户通过屏幕上的多个“窗口”同时查看多个应用程序。</p>
</li>
<li>
<p>新的服务：</p>
<p>为适应用户的要求或满足管理员的需要，需要扩展操作系统以提供新的服务。</p>
</li>
<li>
<p>纠正错误：</p>
<p>任何一个操作系统都会有bug，随着时间的推移会发现这些错误并引入相应的补丁。（当然补丁也有可能引入新的错误）</p>
</li>
</ul>
<h2 id="操作系统的发展">操作系统的发展</h2>
<h3 id="第一阶段：串行阶段（Serial-Processing-）">第一阶段：串行阶段（Serial Processing ）</h3>
<p>该阶段属于没有操作系统的阶段。（1940s-1950s）</p>
<p>特点：程序员是通过直接与计算机硬件打交道的方式来操作计算机。</p>
<p>操作方式：由于没有操作系统，机器是在一个控制台上运行的，控制台包括：显示灯、触发器（拨动开关）、输入设备、打印机。用机器代码编写的程序通过输入设备（如卡片阅读机）载入计算机，如果错误导致程序终止运行，显示灯会给出指示，如果程序正常完成，运行结果会出现在打印机中。</p>
<p>主要问题：包括两个方面</p>
<ul>
<li>调度问题（Scheduling）：大多数装置都使用一个硬拷贝（hardcopy）的登记表预定机器时间。如果一个用户在预定时间之内没有完成程序的运行，那么将会强制终止；如果在程序运行完成之后还有大量的时间，则会造成当时极为宝贵的CPU资源的浪费。（”人机矛盾“）</li>
<li>准备时间（Setup time）：一个程序在当时称为作业（job）。它包括往内存中加载编译器和高级语言程序（源程序），保存编译后的程序（目标程序），然后加载目标程序和公用函数，并链接在一起。（这里每一步都有可能安装或拆卸磁带，或者准备卡片组，在此期间一旦发生错误，只能重新开始。而且用户是独占计算机系统资源，资源并没有得到有效利用。）</li>
</ul>
<h3 id="第二阶段：简单批处理系统（Simple-Batch-Systems）">第二阶段：简单批处理系统（Simple Batch Systems）</h3>
<p>简单批处理方案的核心思想是使用一个称为<strong>监控程序</strong>（monitor）的软件。</p>
<p>工作流程：</p>
<p>用户不再直接访问机器，他们把卡片或磁带中的作业（分批）交给计算机操作员，由操作员将其按顺序组织起来，放在输入设备上，交给监控程序使用。要执行作业时，控制程序会将CPU控制权移交给作业，每个作业执行完毕又都会将CPU的控制权交还给控制程序。接着监控程序继续加载下一个作业。</p>
<blockquote>
<p>注意程序（program）与作业（job）的区别：</p>
<p><strong>作业 = 程序 + 数据 + 作业说明书</strong></p>
</blockquote>
<p>下面分别从监控程序（Monitor）和处理器（CPU）两个角度分析工作原理：</p>
<ul>
<li>
<p>监控程序角度：</p>
<p>监控程序控制事件的顺序。因此需要大部分监控程序必须总是处于内存中并且可以执行，这部分称作<strong>常驻监控程序</strong>（resident monitor）。监控程序每次从输入设备（通常是卡片阅读机或磁带驱动器）中读取一个作业，并将其置于内存中的一个用户程序区域，并把控制权交给该作业，当作业完成后，控制权返还给监控程序，它继续读取下一个作业。每个作业的结果被发送到输出设备（如打印机），交付给用户。</p>
</li>
<li>
<p>处理器角度：</p>
<p>从某个角度看，处理器执行内存中存储的监控程序中的指令；这些指令读入下一个作业并将其存储到内存中的另一个部分。一旦已经读入一个作业，处理器将会遇到监控程序中的<strong>分支指令</strong>，分支指令指导处理器在用户程序的开始处继续执行。处理器继而执行用户程序中的指令，直到遇到一个结束指令或错误条件。不论哪种情况都将导致处理器从监控程序中取下一条指令。</p>
<p>因此，“控制权交给作业”仅仅意味着处理器当前取和执行的都是用户程序中的指令，而“控制权返回给监控程序”的意思是处理器当前从监控程序中取指令并执行指令。</p>
</li>
</ul>
<blockquote>
<p>监控程序改善了作业的准备时间，每个作业中的指令均以一种<strong>作业控制语言</strong>（Job Control Language，JCL）的基本形式给出，这是一种特殊类型的程序设计语言，用于为监控程序提供指令。</p>
</blockquote>
<p>监控程序（或者说批处理操作系统），只是一个简单的计算机程序。它依赖于处理器可以从内存的不同部分取指令的能力，以交替地获取或释放控制权。此外还考虑到了其他硬件功能：</p>
<ul>
<li>内存保护（Memory protection）：当用户程序正在运行时，不能改变包含监控程序的内存区域。如果试图这样做，处理器硬件将发现错误，并将控制转移给监控程序，监控程序取消这个作业，输出错误信息，并载入下一个作业。</li>
<li>定时器（Timer）：防止一个作业长期独占系统。在每个作业开始时，设置定时器，如果定时器时间到，用户程序被停止，控制权返回给监控程序。</li>
<li>特权指令（Privileged instructions）：某些机器语言只能由监控程序执行。如果处理器在运行一个用户程序时遇到这类指令，则会发生错误，并将控制权转移给监控程序。（I/O指令属于特权指令，因此监控程序可以控制所有的I/O设备）</li>
<li>中断（Interrupts）：早期的计算机模型并没有中断能力。这个特征使得操作系统在让用户程序放弃控制权或从用户程序获得控制权时具有更大的灵活性。</li>
</ul>
<p>CPU模式：</p>
<ul>
<li>用户模式（user mode）：用户程序在用户模式下运行。这便意味着：
<ul>
<li>某些指令是不会被执行的（如特权指令）</li>
<li>有些内存区域是无法被访问的</li>
</ul>
</li>
<li>系统模式（system mode）：监控程序在系统模式下运行。（这也可以成为<strong>内核模式</strong>，Kernel mode）
<ul>
<li>特权指令可以被执行</li>
<li>受保护的内存区域也可以被访问（可以访问所有内存区域）</li>
</ul>
</li>
</ul>
<h3 id="第三阶段：多道批处理系统（Multiprogrammed-Batch-Systems）">第三阶段：多道批处理系统（Multiprogrammed Batch Systems）</h3>
<p>简单批处理系统提高了CPU资源的利用率，但是由于I/O设备相对于处理器的速度太慢（一个用户程序要使用I/O设备，CPU必须要等待），处理器依然是空闲的。</p>
<p>下图显示了只有一个单独程序的情况，被称为<strong>单道程序设计</strong>（Uniprogramming）：</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E5%8D%95%E9%81%93%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.png" alt=""></p>
<p>这种低效率是可以避免的。内存空间可以保存操作系统（常驻监控程序）和一个用户程序。假设内存空间容得下操作系统和两个用户程序，那么当一个作业需要等待I/O时，处理器可以切换到另一个可能并不在等待I/O的作业，进一步还可以扩展存储器以保存三个、四个或更多的程序，并且在它们之间进行切换。这种处理称做<strong>多道程序设计</strong>（Multiprogramming）或<strong>多任务处理</strong>（Multitasking），它是现代操作系统的主要方案。</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E5%A4%9A%E9%81%93%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.png" alt=""></p>
<p>下面是单道程序设计以及多道程序设计对于硬件设备的利用率对比：</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E5%88%A9%E7%94%A8%E7%8E%87%E5%AF%B9%E6%AF%941.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E5%88%A9%E7%94%A8%E7%8E%87%E5%AF%B9%E6%AF%942.png" alt=""></p>
<blockquote>
<p>利用率的计算方法（以单道程序设计中对CPU的利用率为例）：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>利用率</mtext><mo>=</mo><mfrac><mrow><mo>∑</mo><mtext>不同阶段的使用时长</mtext><mo>×</mo><mtext>对应的使用率</mtext></mrow><mtext>总时长</mtext></mfrac></mrow><annotation encoding="application/x-tex">利用率 = \frac{\sum不同阶段的使用时长 × 对应的使用率}{总时长}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">利用率</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">总时长</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">不同阶段的使用时长</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">对应的使用率</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mi>r</mi><mi>o</mi><mi>c</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>o</mi><mi>r</mi><mi>u</mi><mi>s</mi><mi>e</mi><mo>=</mo><mfrac><mrow><mn>5</mn><mo>×</mo><mn>0.7</mn><mo>+</mo><mn>15</mn><mo>×</mo><mn>0.1</mn><mo>+</mo><mn>10</mn><mo>×</mo><mn>0.1</mn></mrow><mrow><mn>5</mn><mo>+</mo><mn>15</mn><mo>+</mo><mn>10</mn></mrow></mfrac><mo>=</mo><mn>0.2</mn></mrow><annotation encoding="application/x-tex">Processor use = \frac{5×0.7 + 15×0.1 + 10×0.1}{5+15+10} = 0.2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">rocessor</span><span class="mord mathnormal">u</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.09077em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">15</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">10</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0.7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">15</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0.1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0.1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0.2</span></span></span></span></span></p>
</blockquote>
<p>同简单的批处理系统一样，多道批处理系统依然需要依赖某些计算机硬件功能：中断机制、DMA模块等。</p>
<p>多道批处理系统也存在一些新的问题：</p>
<ul>
<li>内存管理（Memory Management）：对准备运行的多个作业，他们必须都保留在内存中，这时候就要合理的安排内存空间的使用。</li>
<li>调度问题（Scheduling）：如果准备运行多个作业，处理器必须决定运行哪一个，这需要某种调度算法。</li>
<li>状态的保存/恢复（save and restore）：一个作业未处理完要去执行其他作业的时候需要考虑到中断时的状态，以及在处理完其他作业之后回头再继续执行被中断作业的恢复问题。</li>
<li>资源竞争问题（Contention for resources）：每一个作业的运行都要利用资源，这时应该合理考虑资源的分配。</li>
<li>对用户响应时间长（不友好）</li>
</ul>
<h3 id="第四阶段：分时系统（Time-Sharing-Systems）">第四阶段：分时系统（Time-Sharing Systems）</h3>
<p>多道批处理系统已经极大地提高了计算机系统的效率，但是对于用户交互性的实现并不好。所以出现了分时技术（Time-Sharing），多个用户可以同时分享处理器时间，以达到减少用户响应时间的目的。</p>
<p>在分时系统中，多个用户可以通过多个终端同时访问系统，由操作系统控制每个用户程序以很短的时间为单位交替执行。（分时复用）</p>
<p>批处理多道程序设计和分时的比较</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>批处理多道程序设计</th>
<th>分时</th>
</tr>
</thead>
<tbody>
<tr>
<td>主要目标</td>
<td>充分使用处理器</td>
<td>减小响应时间</td>
</tr>
<tr>
<td>操作系统指令源</td>
<td>作业提供的作业控制语言命令</td>
<td>从终端键入的命令</td>
</tr>
</tbody>
</table>
<p>同样的，分时处理系统也需要很多计算机硬件支持（如中断机制等）</p>
<p>像多道批处理系统，分时系统同样也存在以下问题：</p>
<ul>
<li>内存管理（Memory Management）</li>
<li>调度问题（Scheduling）</li>
<li>状态的保存/恢复（save and restore）</li>
<li>资源竞争问题（Contention for resources）</li>
</ul>
<h2 id="主要成就">主要成就</h2>
<p>[DENN80a]提出在操作系统开发中的5个重要的理论进展：进程（The Process）、内存管理（Memory Management）、信息保护和安全（Information Protection and Security）、调度和资源管理（Scheduling and Resource Management）、系统结构（System Structure）。下面就从这五个方面逐介绍。</p>
<h3 id="进程（The-Process）">进程（The Process）</h3>
<p>进程的概念是操作系统的基础。Multics的设计者在20世纪60年代首使用了这个术语[DALE68]。</p>
<p>关于进程的定义（4种）：</p>
<ul>
<li>一个正在执行的程序。</li>
<li>计算机中正在运行的程序的一个实例（Instance）。</li>
<li>可以分配给处理器并由处理器执行的一个实体（Entity）。</li>
<li>由单一的顺序的执行线程、一个当前状态和一组相关的系统资源所描述的活动单元。</li>
</ul>
<p>引入进程的原因：为了实现多道程序批处理操作，以提高计算机的效率。</p>
<blockquote>
<p>计算机系统的发展有三条主线：多道程序批处理操作、分时系统、实时事物系统。他们在时间安排和同步中所产生的问题推动了进程概念的发展。</p>
<p>事务处理系统和分时系统的主要差别：事务处理系统局限于一个或几个应用，而分时系统的用户可以从事程序开发、作业执行以及使用各种各样的应用程序。</p>
</blockquote>
<p>前文介绍，早期的系统程序员在实现多道程序和多用户交互系统时采用的主要工具就是中断。但是由于I/O设备与CPU速度的巨大差异，导致中断并不能有效地支持多道。这就使得计算机系统容易出现错误，大致可以分为以下4类：</p>
<ul>
<li>
<p>不正确的同步（Improper synchronization）</p>
<p>常常会出现这样的情况，即一个例程（routine）必须挂起，等待系统中其他地方的某一事件传来信号。如果设计不正确的信号机制则可能导致信号丢失或者收到重复信号。</p>
</li>
<li>
<p>失败的互斥（Failed mutual exclusion）</p>
<p>常常会出现多个用户或程序试图同时使用一个共享资源的情况。例如，两个用户可能试图编辑同一个文件，如果不控制这种访问，就会发生错误。因此需要设计某种互斥机制，以保证一次只允许一个例程对一部分数据执行事务处理。</p>
</li>
<li>
<p>不确定的程序操作（Nondeterminate program operation）</p>
<p>一个特定程序的结果只依赖于该程序的输入，而并不依赖于共享系统中其他程序的活动。但是，当程序共享内存并且处理器控制它们交错执行时，它们可能会因为重写相同的内存区域而发生不可预测的相互干扰。因此，程序调度顺序可能会影响某个特定程序的输出结果。</p>
</li>
<li>
<p>死锁（Deadlocks）</p>
<p>很有可能两个或多个程序相互挂起等待。</p>
</li>
</ul>
<p>解决这些问题需要一种系统级的方法监控处理器中不同程序的执行。进程的概念为此提供了基础。</p>
<p>进程的组成</p>
<p>进程的组成为三个部分：<code>process = program + data + context</code>。即：</p>
<ul>
<li>
<p>一段可执行的程序</p>
</li>
<li>
<p>程序所需要的相关数据（变量、工作空间、缓冲区等）</p>
</li>
<li>
<p>程序的执行上下文（即程序运行的状态）</p>
<blockquote>
<p>执行上下文（execution context）是根本，又称为进程状态（process state）。是操作系统用来管理和控制进程所需要的内部数据。这种内部信息和进程是分开的，因为操作系统信息不允许被进程直接访问。</p>
</blockquote>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E8%BF%9B%E7%A8%8B%E5%AE%9E%E7%8E%B0.jpg" alt=""></p>
<p>如图是一个典型的进程实现方法。进程索引寄存器表明进程B正在执行。以前执行的进程被临时中断，在A中断的同时，所有寄存器的内容被记录在它的执行上下文环境中，以后操作系统就可以执行进程切换，恢复进程A的执行。进程切换过程包括保存B的上下文和恢复A的上下文。当在程序计数器中载入指向A的程序区域的值时，进程A自动恢复执行。</p>
<blockquote>
<p>进程索引寄存器（process index register）：包含当前正在控制处理器的进程在进程表中的索引。</p>
<p>基址寄存器（base register）与界限存储器（limit register）定义了该进程所占据的存储器区域。基址寄存器中保存了该存储器区域的开始地址；界限存储器中保存了该区域的大小（以字节或字为单位）。</p>
<p>程序计数器和所有的数据引用相对于基址寄存器被解释，并且不能超过界限寄存器中的值，这就可以保护内部进程间不会相互干涉。</p>
<p>进程的本质是一种软件机制。</p>
<p>进程被当作数据结构来实现，（一个进程可以是正在执行，也可以是等待执行）：</p>
<ul>
<li>采用这种结构是为了解决多道程序设计和资源共享带来的问题。</li>
<li>操作系统管理进程所需的所有信息都存储在数据结构中。</li>
</ul>
</blockquote>
<h3 id="内存管理（Memory-Management）">内存管理（Memory Management）</h3>
<p>操作系统担负着5个基本的存储器管理（storage management）责任：</p>
<ul>
<li>
<p>进程隔离（Process isolation）</p>
<p>操纵系统必须保护独立的进程，防止互相干涉各自的存储空间，包括数据和指令。</p>
</li>
<li>
<p>自动分配和管理（Automatic allocation and management）</p>
<p>程序应该根据需要在存储层次间动态地分配，分配对程序员是透明的。因此，程序员无需关心与存储限制有关的问题，操作系统有效地实现分配问题，可以仅在需要时才给作业分配存储空间。</p>
</li>
<li>
<p>支持模块化程序设计（Support of modular programming）</p>
<p>程序员应该能够定义程序模块，并且动态地创建、销毁模块，动态地改变模块大小。</p>
</li>
<li>
<p>保护和访问控制（Protection and access control）</p>
<p>不论在存储层次中的哪一级，存储器的共享都会产生一个程序访问另一个程序存储空间的潜在可能性。当一个特定的应用程序需要共事时，这是可取的。但在别的时候，它可能威胁到程序的完整性，甚至威胁到操作系统自身。操作系统必须允许一部分内存可以由各种用户以各种方式进行访问。</p>
</li>
<li>
<p>长期存储（Long-term storage）</p>
<p>许多应用程序需要在计算机关机后长时间保存信息。</p>
</li>
</ul>
<p>在典型情况下，操作系统使用文件系统机制（File System ）和虚拟存储器机制（Virtual Memory / VM）来满足上述要求。</p>
<ul>
<li>
<p>文件系统：实现了长期存储，它在一个有名字的对象中保存信息，这个对象称作文件。（对程序员来说，文件是一个很方便的概念，对操作系统来说，文件是访问控制和保护的一个有用单元）。</p>
</li>
<li>
<p>虚拟存储器：允许程序从逻辑的角度访问存储器，而不考虑物理内存上可用空间的容量。虚拟存储器的构想是为了满足有多个用户作业同时驻留在内存中的要求，这样，当一个进程被写出到辅助存储器中并且后继进程被读人时，在连续的进程执行之间将不会脱节。</p>
<blockquote>
<p>可以把虚拟存储简单的理解为一种存储机制：以小内存去运行大程序。</p>
</blockquote>
</li>
<li>
<p>分页系统（Page）：由于进程大小不同，如果处理器在很多进程间切换，则很难把它们紧密地压入内存中，因此引进了分页系统。在分页系统中，进程由许多固定大小的块组成，这些块称作页。进程的每一页都可以放置在内存中的任何地方。</p>
<blockquote>
<p>分页系统提供了程序中使用的虚地址（virtual address）和内存中的实地址（real address）或物理地址之间的动态映射。</p>
</blockquote>
</li>
</ul>
<h3 id="信息保护和安全（Information-Protection-and-Security）">信息保护和安全（Information Protection and Security）</h3>
<p>大多数与操作系统相关的安全和保护问题可以分为以下4类：</p>
<ul>
<li>可用性（Availability）：保护系统不被打断。</li>
<li>保密性（Confidentiality）：在多个用户共享一个计算机系统时，保证用户不能读取到未授权访问的数据。</li>
<li>数据完整性（Data integrity）：保护数据不被未授权篡改。</li>
<li>认证（Authenticity）：涉及用户身份的正确认证和消息或数据的合法性。</li>
</ul>
<h3 id="调度和资源管理（Scheduling-and-Resource-Management）">调度和资源管理（Scheduling and Resource Management）</h3>
<p>操作系统的一个关键任务就是管理各种可用资源，包括：CPU（进程）管理、内存管理、I/O设备管理、信息（文件）管理。</p>
<p>任何资源分配和调度策略都必须考虑以下3个因素：</p>
<ul>
<li>
<p>公平性（Fairness）</p>
<p>通常希望给竞争使用某一特定资源的所有进程提供几乎相等和公平的访问机会。对同一类作业，也就是说有类似请求的作业，更是需要如此。</p>
</li>
<li>
<p>有差别的响应（Differential responsiveness）</p>
<p>操作系统需要区分有不同服务要求的不同进程。操作系统将试图做出满足所有要求的分配和调度决策，并且动态地做出决策。</p>
</li>
<li>
<p>高效性（Efficiency）</p>
<p>操作系统希望获得最大的吞吐量（throughput）和最小的响应时间（response time），并且在分时的情况下，能够容纳尽可能多的用户。</p>
<blockquote>
<p>可以看出这些标准是相互矛盾的，所以操作系统需要在这些条件下寻找适当的平衡。</p>
</blockquote>
<blockquote>
<p>操作系统在进行调度和资源管理时使用了一种非常重要的数据结构：队列（Queue）</p>
</blockquote>
</li>
</ul>
<h3 id="系统结构（System-Structure）">系统结构（System Structure）</h3>
<p>随着操作系统中增加了越来越多的功能，并且底层硬件变得更强大、更加通用，导致操作系统的大小和复杂性也随着增加。</p>
<blockquote>
<ul>
<li>MIT在1963年投入使用的CTSS，大约包含32000个36位字。</li>
<li>1964年IBM开发的OS/360有超过100万条的机器指令</li>
<li>1975年MIT和Bel1实验室开发的Multics系统增长到了2000万条机器指令</li>
<li>关于Windows：
<ul>
<li>Windows NT 4.0: 1600万行代码</li>
<li>Windows 2000: 3200多万行代码</li>
<li>Windows XP: 3500万行代码</li>
<li>Windows Vista: 5000万行代码</li>
</ul>
</li>
<li>Linux 2.6.27: 1000万行代码</li>
</ul>
</blockquote>
<p>一个功能完善的操作系统的大小和它所处理的任务的困难性，导致了以下4个普遍存在的问题：</p>
<ul>
<li>操作系统在交付使用时就习惯性地表现出落后的态势。这就要求有新的操作系统或者升级老的操作系统</li>
<li>具体的表现总是事与愿违，难以达到期望的性能。</li>
<li>随着时间的推移会发现越来越多的缺陷，这些缺陷必须及时修复。</li>
<li>理论表明，不可能开发出既复杂的又不易受各种包括病毒、蠕虫和未授权访问之类的安全性攻击的操作系统。</li>
</ul>
<p>针对以上问题提出的解决方案：</p>
<ul>
<li>
<p>软件必须是模块化的：有助于组织软件开发过程、限定诊断范围和修正错误。</p>
</li>
<li>
<p>模块相互之间必须有定义很好的接口：接口必须尽可能简单，这不但可以简化程序设计任务，还可以使系统的扩展更加容易。（把不同模块之间的耦合度尽可能降低）</p>
</li>
<li>
<p>分层：现代操作系统的层次结构按照复杂性、时间刻度、抽象级进行功能划分。</p>
<blockquote>
<p>我们可以把系统看作是一系列的层（a series of levels）：</p>
<ul>
<li>每一层执行操作系统所需功能的相关子集。</li>
<li>每一个层次实现功能都要依靠下一个更低的层次，较低层次执行更为原始的功能并隐藏这些功能的细节。</li>
</ul>
<p>这就把一个问题分解成了许多更容易处理的子问题。</p>
</blockquote>
</li>
</ul>
<h2 id="现代操作系统（Modern-Operating-Systems）">现代操作系统（Modern Operating Systems）</h2>
<p>在过去数年中，由于硬件的发展、新的应用程序的出现以及新的安全威胁，操作系统的结构和功能得到逐步发展，是操作系统发生了本质的变化。</p>
<p>对操作系统要求上的变化速度之快不仅需要修改和增强现有的操作系统体系结构，而且需要有新的操作系统组织方法。在实验用和商用操作系统中有很多不同的方法和设计要素，大致可以分为：微内核体系结构（Microkernel architecture）、多线程（Multithreading ）、对称多处理（Symmetric multiprocessing ，SMP）、分布式操作系统（Distributed operating systems ）、面向对象设计（–Object-oriented design）。下面来逐一介绍：</p>
<ul>
<li>
<p>微内核结构（Microkernel architecture）</p>
<p>微内核与宏内核结构（或单体内核，monolithic kernel architecture）的差别在于微内核体系结构仅给内核分配以下最基本的功能：</p>
<ul>
<li>地址空间（Address spaces），地址转换</li>
<li>进程间的通讯（Interprocess communication ，IPC）</li>
<li>基本的调度（Basic scheduling）</li>
</ul>
<blockquote>
<p>大多数认为操作系统应该提供的功能应该由宏内核提供，包括调度、文件系统、网络、设备驱动器、存储管理等。</p>
</blockquote>
</li>
<li>
<p>多线程（Multithreading ）</p>
<p>多线程技术是指：把执行一个应用程序的进程划分为可以同时运行的多个线程。</p>
<blockquote>
<p>线程和进程的差别：</p>
<ul>
<li>
<p>线程：</p>
<p>可分派的工作单元。</p>
<p>线程顺序执行，并且是可中断的，这样处理器可以转到另一个线程。</p>
</li>
<li>
<p>进程：</p>
<p>一个或多个线程和相关系统资源（如包含数据和代码的存储器空间、打开的文件和设备）的集合。（这紧密对应于一个正在执行的程序的概念）</p>
</li>
</ul>
<p>通过把一个应用程序分解成多个线程，程序员可以在很大程度上控制应用程序的模块性和应用程序相关事件的时间安排。</p>
</blockquote>
</li>
<li>
<p>对称多处理（Symmetric multiprocessing ，SMP）</p>
<p>对称多处理计算机可以定义为具有以下特征的一个独立的计算机系统：</p>
<ul>
<li>有多个处理器。</li>
<li>这些处理器共享同一个内存和I/O设备，它们之间通过通信总线或别的内部连接方案互相连接。</li>
<li>所有的处理器都可以执行相同的功能。（因此称为对称）</li>
</ul>
</li>
<li>
<p>分布式操作系统（Distributed operating systems ）</p>
<p>分布式操作系统使用户产生错觉，使多机系统好像具有一个单一的内存空间、外存空间以及其他的统一存取措施。（如分布式文件系统）</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F.jpg" alt=""></p>
<blockquote>
<p>尽管集群正变得越来越流行，市场上也有很多集群产品，但是，分布式操作系统的技术发展水平落后于单处理器操作系统和对称多处理操作系统。</p>
</blockquote>
</li>
<li>
<p>面向对象设计（–Object-oriented design）</p>
<p>面向对象的设计原理：</p>
<ul>
<li>用于给小内核增加模块化的扩展。</li>
<li>在操作系统一级，基于对象的结构使程序员可以定制操纵系统，而不会破坏操作系统的完整性。</li>
</ul>
<blockquote>
<p>面向对象技术还使得分布式工具和分布式操作系统的开发变得更容易。</p>
</blockquote>
</li>
</ul>
<hr>
<h1>后记</h1>
<p>本篇已完结。</p>
<p>（如有修改或补充欢迎评论）</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/butterfly/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/wechat.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/alipay.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/butterfly/2021/03/14/操作系统/操作系统学习笔记-计算机系统概述/" title="操作系统学习笔记-计算机系统概述"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-14</div><div class="title">操作系统学习笔记-计算机系统概述</div></div></a></div><div><a href="/butterfly/2021/03/28/操作系统/操作系统学习笔记/" title="操作系统学习笔记"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage7.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-28</div><div class="title">操作系统学习笔记</div></div></a></div><div><a href="/butterfly/2021/06/02/操作系统/操作系统学习笔记-I-O管理和磁盘调度/" title="操作系统学习笔记-I/O管理和磁盘调度"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-02</div><div class="title">操作系统学习笔记-I/O管理和磁盘调度</div></div></a></div><div><a href="/butterfly/2021/04/25/操作系统/操作系统学习笔记-信号量相关问题/" title="操作系统学习笔记-信号量相关问题"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-25</div><div class="title">操作系统学习笔记-信号量相关问题</div></div></a></div><div><a href="/butterfly/2021/05/23/操作系统/操作系统学习笔记-内存管理/" title="操作系统学习笔记-内存管理"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-23</div><div class="title">操作系统学习笔记-内存管理</div></div></a></div><div><a href="/butterfly/2021/05/04/操作系统/操作系统学习笔记-并发：死锁和饥饿/" title="操作系统学习笔记-并发：死锁和饥饿"><img class="cover" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OperatingSystemscover1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-04</div><div class="title">操作系统学习笔记-并发：死锁和饥饿</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg" onerror="this.onerror=null;this.src='/butterfly/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">花猪</div><div class="author-info__description">寄给你，这片小小的银杏叶<br>它什么也不暗示，因为是秋天了</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/butterfly/archives/"><div class="headline">文章</div><div class="length-num">82</div></a></div><div class="card-info-data-item is-center"><a href="/butterfly/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/butterfly/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/CNhuazhu"><i class="fab fa-github"></i><span>我的github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CNhuazhu" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">花猪在此欢迎您光临小破站 (՞•Ꙫ•՞) <br><br>  <b><i>本站已更新域名</i></b>：<a href="https://cnhuazhu.top">https://cnhuazhu.top</a> <br>  <b><i>码云地址（同步更新）</i></b>：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cnhuazhu.gitee.io">https://cnhuazhu.gitee.io</a> <br><br>  本站主题：Butterfly 3.7.8 <br> <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/pig.gif"></div><timing></timing></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">第二章：操作系统概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%9B%AE%E6%A0%87%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-number">2.1.</span> <span class="toc-text">操作系统的目标和功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.1.</span> <span class="toc-text">操作系统定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%BA%E7%94%A8%E6%88%B7%E4%B8%8E%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.1.2.</span> <span class="toc-text">操作系统作为用户与计算机的接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%BA%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E8%80%85"><span class="toc-number">2.1.3.</span> <span class="toc-text">操作系统作为资源管理者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%98%93%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">2.1.4.</span> <span class="toc-text">操作系统的易扩展性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">2.2.</span> <span class="toc-text">操作系统的发展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%9A%E4%B8%B2%E8%A1%8C%E9%98%B6%E6%AE%B5%EF%BC%88Serial-Processing-%EF%BC%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">第一阶段：串行阶段（Serial Processing ）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%EF%BC%9A%E7%AE%80%E5%8D%95%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88Simple-Batch-Systems%EF%BC%89"><span class="toc-number">2.2.2.</span> <span class="toc-text">第二阶段：简单批处理系统（Simple Batch Systems）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5%EF%BC%9A%E5%A4%9A%E9%81%93%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88Multiprogrammed-Batch-Systems%EF%BC%89"><span class="toc-number">2.2.3.</span> <span class="toc-text">第三阶段：多道批处理系统（Multiprogrammed Batch Systems）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5%EF%BC%9A%E5%88%86%E6%97%B6%E7%B3%BB%E7%BB%9F%EF%BC%88Time-Sharing-Systems%EF%BC%89"><span class="toc-number">2.2.4.</span> <span class="toc-text">第四阶段：分时系统（Time-Sharing Systems）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%88%90%E5%B0%B1"><span class="toc-number">2.3.</span> <span class="toc-text">主要成就</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%EF%BC%88The-Process%EF%BC%89"><span class="toc-number">2.3.1.</span> <span class="toc-text">进程（The Process）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%88Memory-Management%EF%BC%89"><span class="toc-number">2.3.2.</span> <span class="toc-text">内存管理（Memory Management）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%AE%89%E5%85%A8%EF%BC%88Information-Protection-and-Security%EF%BC%89"><span class="toc-number">2.3.3.</span> <span class="toc-text">信息保护和安全（Information Protection and Security）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E5%92%8C%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%EF%BC%88Scheduling-and-Resource-Management%EF%BC%89"><span class="toc-number">2.3.4.</span> <span class="toc-text">调度和资源管理（Scheduling and Resource Management）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%EF%BC%88System-Structure%EF%BC%89"><span class="toc-number">2.3.5.</span> <span class="toc-text">系统结构（System Structure）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88Modern-Operating-Systems%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">现代操作系统（Modern Operating Systems）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">后记</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/butterfly/2021/10/12/Hexo%E9%83%A8%E7%BD%B2%E8%87%B3%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88Ubuntu-20-04%EF%BC%89/" title="Hexo部署至服务器（Ubuntu 20.04）"><img src="https://gitee.com/CNhuazhu/tu-chuang1/raw/master/img-blog/Ubuntu_Server_cover.jpg" onerror="this.onerror=null;this.src='/butterfly/img/404.jpg'" alt="Hexo部署至服务器（Ubuntu 20.04）"/></a><div class="content"><a class="title" href="/butterfly/2021/10/12/Hexo%E9%83%A8%E7%BD%B2%E8%87%B3%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88Ubuntu-20-04%EF%BC%89/" title="Hexo部署至服务器（Ubuntu 20.04）">Hexo部署至服务器（Ubuntu 20.04）</a><time datetime="2021-10-12T07:13:40.000Z" title="发表于 2021-10-12 15:13:40">2021-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterfly/2021/09/26/CSS/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" title="CSS选择器"><img src="https://gitee.com/CNhuazhu/tu-chuang1/raw/master/img-blog/CSS3cover.jpg" onerror="this.onerror=null;this.src='/butterfly/img/404.jpg'" alt="CSS选择器"/></a><div class="content"><a class="title" href="/butterfly/2021/09/26/CSS/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" title="CSS选择器">CSS选择器</a><time datetime="2021-09-26T09:08:37.000Z" title="发表于 2021-09-26 17:08:37">2021-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterfly/2021/08/19/Vue/Vue%E5%AD%A6%E4%B9%A0-axios/" title="Vue学习-axios"><img src="https://gitee.com/CNhuazhu/tu-chuang1/raw/master/img-blog/Vuecover.jpg" onerror="this.onerror=null;this.src='/butterfly/img/404.jpg'" alt="Vue学习-axios"/></a><div class="content"><a class="title" href="/butterfly/2021/08/19/Vue/Vue%E5%AD%A6%E4%B9%A0-axios/" title="Vue学习-axios">Vue学习-axios</a><time datetime="2021-08-19T13:14:44.000Z" title="发表于 2021-08-19 21:14:44">2021-08-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterfly/2021/08/19/Flask/Flask%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" title="Flask解决跨域问题"><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/Flaskcover1.jpg" onerror="this.onerror=null;this.src='/butterfly/img/404.jpg'" alt="Flask解决跨域问题"/></a><div class="content"><a class="title" href="/butterfly/2021/08/19/Flask/Flask%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" title="Flask解决跨域问题">Flask解决跨域问题</a><time datetime="2021-08-19T12:47:12.000Z" title="发表于 2021-08-19 20:47:12">2021-08-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterfly/2021/08/17/Vue/Vue%E5%AD%A6%E4%B9%A0-Vuex/" title="Vue学习-Vuex"><img src="https://gitee.com/CNhuazhu/tu-chuang1/raw/master/img-blog/Vuecover.jpg" onerror="this.onerror=null;this.src='/butterfly/img/404.jpg'" alt="Vue学习-Vuex"/></a><div class="content"><a class="title" href="/butterfly/2021/08/17/Vue/Vue%E5%AD%A6%E4%B9%A0-Vuex/" title="Vue学习-Vuex">Vue学习-Vuex</a><time datetime="2021-08-17T12:02:53.000Z" title="发表于 2021-08-17 20:02:53">2021-08-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 By 花猪</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">感谢光临<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cnhuazhu.github.io/blog-LeadPage/" style="text-decoration:underline">小破站</a>,欢迎您提出宝贵的意见！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/butterfly/js/utils.js"></script><script src="/butterfly/js/main.js"></script><script src="/butterfly/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/butterfly/js/search/local-search.js"></script><div class="js-pjax"><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 3000);</script></div><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', '', 'katex-wrap')
  })
})()</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'hexo-1g41404w9f800e94',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'hexo-1g41404w9f800e94',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'VHoX95KsBQSMyzEc3TdpmBkF-MdYXbMMI',
      appKey: 'qnwObDMbgMEKnu1Gp8tk7PYJ',
      placeholder: '欢迎留下你的评论（昵称和邮箱为必填项）',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script src="/js/ip_content.js"></script><script src="/js/timing.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><script src="/js/footer.js"></script><script src="/js/ginkgo-leaf.js"></script><script id="canvas_nest" defer="defer" color="0,0,0" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="pjax-reload"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeInLeft');
    arr[i].setAttribute('data-wow-duration', '600ms');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeInRightBig');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer="defer" src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer="defer" src="/butterfly/js/wow_init.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
                        function butterfly_swiper_injector_config(){
                          var parent_div_git = document.getElementById('recent-posts');
                          var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/03/28/Hexo魔改/Hexo魔改记录/" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage4.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-03-28</span><a class="blog-slider__title" href="2021/03/28/Hexo魔改/Hexo魔改记录/" alt="">Hexo魔改记录</a><div class="blog-slider__text">Hexo魔改记录</div><a class="blog-slider__button" href="2021/03/28/Hexo魔改/Hexo魔改记录/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/08/02/Vue/Vue学习笔记/" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage5.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-08-02</span><a class="blog-slider__title" href="2021/08/02/Vue/Vue学习笔记/" alt="">Vue学习笔记</a><div class="blog-slider__text">本文将介绍Vue的基础语法</div><a class="blog-slider__button" href="2021/08/02/Vue/Vue学习笔记/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/03/28/Java/Java学习记录/" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage8.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-03-28</span><a class="blog-slider__title" href="2021/03/28/Java/Java学习记录/" alt="">Java学习记录</a><div class="blog-slider__text">Java学习记录</div><a class="blog-slider__button" href="2021/03/28/Java/Java学习记录/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/03/28/操作系统/操作系统学习笔记/" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage7.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-03-28</span><a class="blog-slider__title" href="2021/03/28/操作系统/操作系统学习笔记/" alt="">操作系统学习笔记</a><div class="blog-slider__text">记录操作系统学习历程</div><a class="blog-slider__button" href="2021/03/28/操作系统/操作系统学习笔记/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/03/28/计算机网络/计算机网络学习笔记/" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/RotatingImage3.jpg" alt=""/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-03-28</span><a class="blog-slider__title" href="2021/03/28/计算机网络/计算机网络学习笔记/" alt="">计算机网络学习笔记</a><div class="blog-slider__text">记录计算机网络学习历程</div><a class="blog-slider__button" href="2021/03/28/计算机网络/计算机网络学习笔记/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
                          console.log('已挂载butterfly_swiper')
                          // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                          parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
                          }
                        if( document.getElementById('recent-posts') && (location.pathname ==='all'|| 'all' ==='all')){
                        butterfly_swiper_injector_config()
                        }
                      </script><script defer src="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --><script src="/butterfly/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/butterfly/live2dw/assets/assets/tororo.model.json"},"display":{"superSample":2,"width":200,"height":400,"position":"left","hOffset":0,"vOffset":-105},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body></html>