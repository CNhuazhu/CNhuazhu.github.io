<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg">

<link rel="stylesheet" href="/next/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cnhuazhu.gitee.io","root":"/next/","images":"/next/images","scheme":"Mist","version":"8.6.1","exturl":false,"sidebar":{"position":"left","Muse | Mist":320,"display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/next/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/next/js/config.js"></script>
<meta name="description" content="记录操作系统学习历程">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统学习笔记-文件管理">
<meta property="og:url" content="https://cnhuazhu.gitee.io/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="花猪のBlog">
<meta property="og:description" content="记录操作系统学习历程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E8%A6%81%E7%B4%A0.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS堆文件结构.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS顺序文件结构.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS索引顺序文件结构.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS树状目录结构.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E8%BF%9E%E7%BB%AD%E5%88%86%E9%85%8D%E5%9B%BE.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E9%93%BE%E5%BC%8F%E5%88%86%E9%85%8D%E5%9B%BE.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E7%B4%A2%E5%BC%95%E5%88%86%E9%85%8D%E5%9B%BE.png">
<meta property="article:published_time" content="2021-06-09T09:13:20.000Z">
<meta property="article:modified_time" content="2021-06-11T08:55:33.904Z">
<meta property="article:author" content="花猪">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84.png">


<link rel="canonical" href="https://cnhuazhu.gitee.io/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://cnhuazhu.gitee.io/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/","path":"2021/06/09/操作系统/操作系统学习笔记-文件管理/","title":"操作系统学习笔记-文件管理"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>操作系统学习笔记-文件管理 | 花猪のBlog</title>
  




  <noscript>
    <link rel="stylesheet" href="/next/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/next/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">花猪のBlog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-主站"><a href="https://cnhuazhu.top/" rel="noopener" target="_blank"><i class="fas fa-chevron-right fa-fw"></i>主站</a></li>
        <li class="menu-item menu-item-home"><a href="/next/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/next/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">14</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/next/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">8</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/next/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">53</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0%EF%BC%9A%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">第十二章：文件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.1.</span> <span class="nav-text">文件和文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-number">2.1.2.</span> <span class="nav-text">文件结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.3.</span> <span class="nav-text">文件管理系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%BB%84%E7%BB%87%E5%92%8C%E8%AE%BF%E9%97%AE"><span class="nav-number">2.2.</span> <span class="nav-text">文件组织和访问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%9A%84%E8%AF%84%E4%BB%B7%E6%A0%87%E5%87%86"><span class="nav-number">2.2.1.</span> <span class="nav-text">文件管理的评价标准</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A0%86%E6%96%87%E4%BB%B6%EF%BC%88Pile-%EF%BC%89"><span class="nav-number">2.2.2.</span> <span class="nav-text">堆文件（Pile ）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E6%96%87%E4%BB%B6%EF%BC%88Sequential-File-%EF%BC%89"><span class="nav-number">2.2.3.</span> <span class="nav-text">顺序文件（Sequential File ）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E9%A1%BA%E5%BA%8F%E6%96%87%E4%BB%B6%EF%BC%88Indexed-Sequential-File%EF%BC%89"><span class="nav-number">2.2.4.</span> <span class="nav-text">索引顺序文件（Indexed Sequential File）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6%EF%BC%88Indexed-File-%EF%BC%89"><span class="nav-number">2.2.5.</span> <span class="nav-text">索引文件（Indexed File ）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E6%96%87%E4%BB%B6%E6%88%96%E6%95%A3%E5%88%97-%E5%93%88%E5%B8%8C%E6%96%87%E4%BB%B6%EF%BC%88Direct-or-Hashed-File%EF%BC%89"><span class="nav-number">2.2.6.</span> <span class="nav-text">直接文件或散列&#x2F;哈希文件（Direct or Hashed File）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="nav-number">2.3.</span> <span class="nav-text">文件目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AE%B9"><span class="nav-number">2.3.1.</span> <span class="nav-text">内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.2.</span> <span class="nav-text">结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">简单目录结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%A4%E7%BA%A7%E7%9B%AE%E5%BD%95%E6%96%B9%E6%A1%88"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">两级目录方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%82%E6%AC%A1-%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84%E7%9B%AE%E5%BD%95"><span class="nav-number">2.3.2.3.</span> <span class="nav-text">层次&#x2F;树状结构目录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D"><span class="nav-number">2.3.3.</span> <span class="nav-text">命名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="nav-number">2.4.</span> <span class="nav-text">文件共享</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="nav-number">2.4.1.</span> <span class="nav-text">访问权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%97%B6%E8%AE%BF%E9%97%AE"><span class="nav-number">2.4.2.</span> <span class="nav-text">同时访问</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E7%BA%A7%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%EF%BC%88%E8%BE%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%89"><span class="nav-number">2.5.</span> <span class="nav-text">二级存储管理（辅存管理）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%88%86%E9%85%8D"><span class="nav-number">2.5.1.</span> <span class="nav-text">文件分配</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%84%E5%88%86%E9%85%8D"><span class="nav-number">2.5.1.1.</span> <span class="nav-text">预分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F"><span class="nav-number">2.5.1.2.</span> <span class="nav-text">分区大小</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9E%E7%BB%AD%E5%88%86%E9%85%8D"><span class="nav-number">2.5.1.3.</span> <span class="nav-text">连续分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%93%BE%E5%BC%8F%E5%88%86%E9%85%8D"><span class="nav-number">2.5.1.4.</span> <span class="nav-text">链式分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%88%86%E9%85%8D"><span class="nav-number">2.5.1.5.</span> <span class="nav-text">索引分配</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A9%BA%E9%97%B2%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86"><span class="nav-number">2.5.2.</span> <span class="nav-text">空闲空间管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="nav-number">2.5.3.</span> <span class="nav-text">可靠性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-number">3.</span> <span class="nav-text">后记</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="花猪"
      src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg">
  <p class="site-author-name" itemprop="name">花猪</p>
  <div class="site-description" itemprop="description">为了获得不同的阅读体验，建立此分站。<br>（可在导航栏搜索想要查看的文章）<br><br>本站主题：NEXT 8.6.1</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/next/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/next/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/next/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/CNhuazhu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CNhuazhu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/CNhuazhu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cnhuazhu.gitee.io/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/avatar.jpg">
      <meta itemprop="name" content="花猪">
      <meta itemprop="description" content="为了获得不同的阅读体验，建立此分站。<br>（可在导航栏搜索想要查看的文章）<br><br>本站主题：NEXT 8.6.1">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花猪のBlog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          操作系统学习笔记-文件管理
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-09 17:13:20" itemprop="dateCreated datePublished" datetime="2021-06-09T17:13:20+08:00">2021-06-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-11 16:55:33" itemprop="dateModified" datetime="2021-06-11T16:55:33+08:00">2021-06-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/next/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
        </span>
    </span>

  
    <span id="/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" class="post-meta-item leancloud_visitors" data-flag-title="操作系统学习笔记-文件管理" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span id="/next/2021/06/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" class="post-meta-item twikoo_visitors" data-flag-title="操作系统学习笔记-文件管理" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="twikoo_visitors"></span>
    </span>
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

            <div class="post-description">记录操作系统学习历程</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><em>正在学习操作系统，记录笔记。</em></p>
<blockquote>
<p>参考资料：</p>
<p>《操作系统（精髓与设计原理 第8版） 》</p>
</blockquote>
<hr>
<h1 id="第十二章：文件管理"><a href="#第十二章：文件管理" class="headerlink" title="第十二章：文件管理"></a>第十二章：文件管理</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="文件和文件系统"><a href="#文件和文件系统" class="headerlink" title="文件和文件系统"></a>文件和文件系统</h3><p>文件管理（File Management）</p>
<p>在大多数一应用中，文件都是核心元素，相对应的就需要文件管理。文件管理的基本目标就是能够快速准确地找到存储在磁盘当中的文件，并将其加载进内存，进行读/写操作。</p>
<p>要实现文件管理可以有两种方式：</p>
<ul>
<li>用户编程实现：对于用户来讲，需要知晓磁盘的物理特性，还有很多其他的要求，显然这并不是一个很好的方案，对于用户来说要求太高。</li>
<li>操作系统实现：我们重点就是要讨论此方案。</li>
</ul>
<p>实际上所有的操作系统都提供了文件管理系统，它由系统实用程序组成，可以作为具有特权的应用程序来运行。</p>
<p>文件系统属性：</p>
<ul>
<li><p>长期存在：文件存储在硬盘或其他辅存中，用户退出系统时文件不会丢失，</p>
</li>
<li><p>进程共享：文件有名字，具有允许受控共享的相关访问权限。</p>
</li>
<li><p>结构化存储：取决于具体的文件系统，一个文件具有针对某个特定应用的内部结构。</p>
<blockquote>
<p>此外，文件可组织为层次结构或更复杂的结构，以反映文件之间的关系。</p>
</blockquote>
</li>
</ul>
<p>文件系统提供对文件进行操作的接口，典型的有以下六种：</p>
<ul>
<li><p>创建（Create）：在文件结构中定义并定位一个新文件。</p>
</li>
<li><p>删除（Delete）：从文件结构中删除并销毁一个文件。</p>
<blockquote>
<p>注意这里的删除并不能真正地把数据从物理磁盘中抹除。（格式化同样如此）</p>
</blockquote>
</li>
<li><p>打开（Open）：进程将一个已有文件声明为“打开”状态，以便允许该进程对这个文件进行操作。</p>
</li>
<li><p>关闭（Close）：相关进程关闭一个文件，以便不再能对该文件进行操作，直到该进程再次打开它。</p>
</li>
<li><p>读（Read）：进程读取文件中的所有或部分数据。</p>
</li>
<li><p>写（Write）：进程更新文件，要么通过添加新数据来扩大文件的尺寸，要么通过改变文件中已有数据项的值。</p>
</li>
</ul>
<h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p>讨论文件时通常要用到如下四个术语：</p>
<ul>
<li><p>域（Field）：域是基本的数据单元。</p>
<ul>
<li><p>一个域包含一个值</p>
<blockquote>
<p>比如：现有一个工资管理系统，其中有一个名为“花猪”的对象（也可视为一条记录），其中有一个属性叫做性别，这个属性就称为一个域。</p>
</blockquote>
</li>
<li><p>可分为<code>基本域</code>和<code>组合域</code>：</p>
<ul>
<li>基本域：不可再分，通常为定长。</li>
<li>组合域：可以再分成子域，通常为变长。（如工资属性可以细分为基本工资、绩效工资等）</li>
</ul>
</li>
</ul>
</li>
<li><p>记录（Record）：是一组相关域的集合。</p>
<ul>
<li><p>可视为应用程序的一个单元。</p>
<blockquote>
<p>比如：一条雇员记录可能包含以下域：名字、社会保险号、工作类型、雇用日期等。</p>
</blockquote>
</li>
<li><p>记录的长度可以是定长的或变长的</p>
</li>
</ul>
</li>
<li><p>文件（File）：一组相似记录的集合。</p>
<ul>
<li><p>被用户和应用程序视为一个实体，并可通过名字访问</p>
</li>
<li><p>有唯一的文件名，可以被创建或删除</p>
</li>
<li><p>访问控制通常在文件级实施</p>
<blockquote>
<p>在有些更复杂的系统中，控制访问也可以在记录级或域级实施。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>数据库（Database）：是一组相关数据的集合。</p>
<ul>
<li>其本质特征是数据元素间存在着明确的关系</li>
<li>可供不同的应用程序使用</li>
</ul>
</li>
</ul>
<h3 id="文件管理系统"><a href="#文件管理系统" class="headerlink" title="文件管理系统"></a>文件管理系统</h3><p>文件管理系统是一组系统软件，它为使用文件的用户和应用程序提供服务。</p>
<ul>
<li>文件管理系统是用户或应用程序访问文件的唯一方式</li>
<li>用户或程序员不需要为每个应用程序开发专用软件</li>
</ul>
<p>文件管理系统需要满足以下七大需求：</p>
<ol>
<li>满足数据管理的要求和用户的需求，包括存储数据和执行上述操作的能力。</li>
<li>最大限度地保证文件中的数据有效。</li>
<li>优化性能：包括总体吞吐量（从系统的角度）和响应时间（从用户角度）。</li>
<li>为各种类型的存储设备提供I/O支持。</li>
<li>减少或消除丢失或者破坏数据的可能性。</li>
<li>向用户进程提供标准I/O接口例程集。</li>
<li>在多用户系统中为多个用户提供I/O支持。</li>
</ol>
<p>在上述第一条中，用户需求的范围取决于各种应用程序和计算机系统的使用环境。对于交互式的通用系统，最小需求集合如下：</p>
<ul>
<li>每个用户实现基本操作：如创建、删除、读取和修改文件</li>
<li>每个用户都应能受控地访问其他用户的文件</li>
<li>每个用户都应能控制允许对用户文件进行哪种类型的访问</li>
<li>每个用户应该能够按照自己的需要从而对文件进行重构</li>
<li>每个用户都应能在文件间移动数据</li>
<li>每个用户都应能备份用户文件，并在文件遭到破坏时恢复文件</li>
<li>每个用户都应能通过名字而非数字标识符访问自己的文件</li>
</ul>
<p>文件系统架构</p>
<p>下图展示了文件系统软件架构：</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84.png"></p>
<p>从底层逐层向上介绍：</p>
<ol>
<li><p>设备驱动层：</p>
<ul>
<li>直接与外围设备通信</li>
<li>设备驱动程序负责启动设备上的I/O操作，处理I/O请求的完成</li>
</ul>
</li>
<li><p>基本文件系统：也称为物理I/O层，是计算机系统外部环境的基本接口。</p>
<ul>
<li>处理在磁盘间或磁带系统间交换的数据块</li>
<li>关注块在辅存和内存缓冲区的位置，而非数据的内容或所涉及的文件结构</li>
<li>通常是操作系统的一部分</li>
</ul>
</li>
<li><p>基本I/O管理程序：</p>
<ul>
<li>负责所有文件I/O的初始化和终止</li>
<li>需要一定的控制结构来维护设备的输入、输出、调度和文件状态</li>
<li>根据所选的文件来选择执行文件I/O的设备</li>
<li>为了优化性能，参与调度对磁盘和磁带的访问</li>
<li>是操作系统的一部分</li>
</ul>
</li>
<li><p>逻辑I/O：</p>
<ul>
<li><p>使用户和应用程序能够访问记录</p>
</li>
<li><p>提供一种通用的记录I/O能力</p>
</li>
<li><p>维护关于文件的基本数据</p>
<blockquote>
<p>基本文件系统处理的是数据块，而逻辑I/O模块处理的是文件记录。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>访问方法：</p>
<ul>
<li><p>文件系统中与用户最近的一层</p>
</li>
<li><p>在应用程序和文件系统以及保存数据的设备之间提供了一个标准接口</p>
</li>
<li><p>不同的访问方法反映了不同的文件结构及访问和处理数据的不同方法</p>
<blockquote>
<p>堆（Pile）、顺序（Sequential）、索引顺序（Indexed Sequential）、索引（Indexed）、散列（Hashed）</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p>文件管理功能：</p>
<p>下图展示了文件管理的要素</p>
<p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E8%A6%81%E7%B4%A0.png"></p>
<ul>
<li><p>用户或应用进程发送操作文件的命令（创建、删除等）与文件系统进行交互</p>
</li>
<li><p>在执行操作任何文件之前，文件系统必须确认和定位所选择的文件</p>
</li>
<li><p>定位文件要求使用某种类型的目录来描述所有文件的位置及它们的属性</p>
</li>
<li><p>大多数共享系统都实行用户访问控制</p>
<blockquote>
<p>只有被授权用户才允许以特定方式访问特定的文件</p>
</blockquote>
</li>
<li><p>文件的访问是以块的形式</p>
<blockquote>
<p>虽然用户和应用程序关注的是记录，但I/O是以块为基础来完成的，因此文件中的记录必须组织成一组块序列来输出，并在输入后将各块组合起来。</p>
</blockquote>
</li>
<li><p>支持文件的块I/O需要许多功能：</p>
<ul>
<li>管理辅存：包括把文件分配到辅存中的空闲块</li>
<li>管理空闲存储空间：以便知道新文件和现有文件增长时可以使用哪些块</li>
<li>必须调度单个的块I/O请求</li>
</ul>
</li>
</ul>
<h2 id="文件组织和访问"><a href="#文件组织和访问" class="headerlink" title="文件组织和访问"></a>文件组织和访问</h2><h3 id="文件管理的评价标准"><a href="#文件管理的评价标准" class="headerlink" title="文件管理的评价标准"></a>文件管理的评价标准</h3><ul>
<li><p>短的存取时间：</p>
<ul>
<li><p>需要时可以随机访问单一记录</p>
</li>
<li><p>无需批处理模式</p>
<blockquote>
<p>如果一个文件仅以批处理方式处理，且每次都要访问到它的所有记录，则基本无须关注用于检索一条记录的快速访问。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>易于修改：</p>
<blockquote>
<p>存储在CD-ROM中的文件永远不会被修改，因此易于修改这一点根本不需要考虑。</p>
</blockquote>
</li>
<li><p>存储经济性：</p>
<ul>
<li><p>为了节约存储空间，数据冗余应最小（类似内存管理中考虑减小零头的道理）</p>
<blockquote>
<p>另一方面，冗余是提高数据访问速度的一种主要手段。例如：使用索引。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>维护简单</p>
</li>
<li><p>可靠性</p>
</li>
</ul>
<p>下面要介绍五类常见的文件组织结构：</p>
<h3 id="堆文件（Pile-）"><a href="#堆文件（Pile-）" class="headerlink" title="堆文件（Pile ）"></a>堆文件（Pile ）</h3><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS堆文件结构.png" style="zoom:80%;" />

<ul>
<li><p>最简单的文件组织形式，简单有效</p>
</li>
<li><p>数据按照到达的顺序被组织起来，每条记录由一串数据组成。没有固定的结构</p>
<blockquote>
<p>类似于本人考试时候时候草稿纸，按照【会写的】题目顺序依次演算，最后再演算之前较难的题，稿纸上的记录就是做题的顺序，不固定。</p>
</blockquote>
</li>
<li><p>堆的目的仅仅是积累大量的数据并保存数据</p>
</li>
<li><p>记录可以有不同的域，或者相似但顺序不同</p>
<blockquote>
<p>因此，每个域都应能自我描述，并包含域名和值。</p>
</blockquote>
</li>
<li><p>缺点：</p>
<ul>
<li><p>写入的数据必须具有自解释性：包含域名和值，</p>
<blockquote>
<p>每个域的长度由分隔符隐式地指定，要么明确地包含在一个子域中，要么是该域类型的默认长度。</p>
</blockquote>
</li>
<li><p>对于记录的访问是通过穷举查找的方式（由于非结构化的原因）</p>
<blockquote>
<p>当数据在处理前采集并存储时，或当数据难以组织时，会用到堆文件。当保存的数据大小和结构不同时，这种类型的文件空间使用情况很好，能较好地用于穷举查找，且易于修改。但是，除了这些受限制的使用外，这类文件对大多数应用都不适用。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="顺序文件（Sequential-File-）"><a href="#顺序文件（Sequential-File-）" class="headerlink" title="顺序文件（Sequential File ）"></a>顺序文件（Sequential File ）</h3><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS顺序文件结构.png" style="zoom:80%;" />

<ul>
<li><p>最常用的文件组织形式</p>
<blockquote>
<p>使用场景：批量的写入数据，例如：爬虫</p>
</blockquote>
</li>
<li><p>每条记录都使用一种固定的格式</p>
</li>
<li><p>所有记录都具有相同的长度</p>
</li>
<li><p>所有记录都由相同数量、长度固定的域按特定的顺序组成</p>
<blockquote>
<p>以上三点可以避免数据的自解释性，降低成本开销。</p>
</blockquote>
</li>
<li><p>缺点：</p>
<ul>
<li>对记录的查询仍然是穷举查询</li>
<li>插入一条记录时并不方便，需要移动后续的所有记录位置</li>
</ul>
</li>
<li><p>为了解决数据插入的繁琐，引入了一个特殊的域：<strong>关键域（key field）/ 主域</strong></p>
<ul>
<li>通常是每条记录的第一个域</li>
<li>可以唯一地标识该记录（类似数据库中的主键）</li>
</ul>
</li>
<li><p>为了高效处理数据，引入<strong>日志文件（log file）/ 事务文件（transaction file）</strong></p>
<ul>
<li>进行文件处理时，把新的记录放在一个单独的堆文件中，即日志文件</li>
<li>通过周期性地执行成批更新，把日志文件合并到主文件中，并按正确的关键字顺序产生一个新文件</li>
</ul>
</li>
</ul>
<h3 id="索引顺序文件（Indexed-Sequential-File）"><a href="#索引顺序文件（Indexed-Sequential-File）" class="headerlink" title="索引顺序文件（Indexed Sequential File）"></a>索引顺序文件（Indexed Sequential File）</h3><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS索引顺序文件结构.png" style="zoom:80%;" />

<ul>
<li><p>索引提供了一个查询功能，以快速到达所需记录的附近区域</p>
</li>
<li><p>索引文件中的每条记录由两个域组成：关键域和指向主文件的指针，其中关键域和主文件中的关键域相同</p>
</li>
<li><p>查找某个特定的域，首先要查找索引：</p>
<ul>
<li>查找关键域值等于目标关键域值或者位于目标关键域值之前且最大的索引</li>
<li>然后在该索引的指针所指的主文件中的位置处开始查找</li>
</ul>
<blockquote>
<p>举个例子说明该方法的有效性：</p>
<p>考虑一个包含100万条记录的顺序文件</p>
<ul>
<li>查找某个特定的关键域值，平均需要访问50万次记录（<code>(1000000 + 1) / 2</code>）</li>
<li>假设现在创建一个包含了1000项的索引，如果要查找特定记录：<ul>
<li>平均在索引文件中访问500次（<code>(1000 + 1 ) / 2</code>）</li>
<li>接着在主文件中平均访问500次（<code>(1000 + 1 ) / 2</code>）</li>
</ul>
</li>
</ul>
<p>由此可见，平均访问次数从500000降低到了1000，大大降低了查询开销。</p>
</blockquote>
</li>
<li><p>文件按如下方式处理：</p>
<ul>
<li><p>主文件中的每条记录都包含一个附加域（附加域对应用程序不可见）</p>
</li>
<li><p>附加域是指向溢出文件的一个指针</p>
</li>
<li><p>向文件中插入一条新记录时，它被添加到溢出文件（overflow file）中</p>
</li>
<li><p>修改主文件中逻辑顺序位于这条新纪录之前的记录，使其包含指向新纪录前面的那条记录的指针</p>
<blockquote>
<p>如果新纪录前面的那条记录也在溢出文件中，那么修改新纪录前面的那条记录的指针</p>
</blockquote>
</li>
<li><p>索引顺序文件有时也按照批处理的方式合并溢出文件</p>
</li>
</ul>
</li>
<li><p>为提供更有效的访问，可以为关键域设置多级索引</p>
<blockquote>
<p>同样以访问包含100万条记录的顺序文件</p>
<ul>
<li>首先构建10000项的低级索引</li>
<li>低级索引再构建100项的高级索引</li>
<li>查询过程从高级索引开始：<ul>
<li>查询低级索引的一项，平均50次访问（<code>(50 + 1) / 2</code>）</li>
<li>找到主文件中的一项，平均50次访问（<code>(50 + 1) / 2</code>）</li>
<li>最后查找主文件，平均50次访问（<code>(50 + 1) / 2</code>）</li>
</ul>
</li>
<li>总共平均查找150次</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="索引文件（Indexed-File-）"><a href="#索引文件（Indexed-File-）" class="headerlink" title="索引文件（Indexed File ）"></a>索引文件（Indexed File ）</h3><p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.png"></p>
<p>索引顺序文件的是基于文件的一个域（关键域）进行处理，但是在现实中，可能需要对我们所关注的一些域（属性）进行记录查询，这时索引顺序文件就失去了作用。为此，引入了一个多索引的结构。</p>
<ul>
<li><p>索引文件摒弃了顺序性和关键字的概念，只通过索引访问记录</p>
</li>
<li><p>要求至少有一个索引的指针指向一条记录就好，不限制记录放置的位置</p>
<blockquote>
<p>还可以使用长度可变的记录</p>
</blockquote>
</li>
<li><p>可以使用两种类型的索引：</p>
<ul>
<li><p>完全索引（exhaustive index）：包含主文件中每条记录的索引项</p>
<p>查询速度快，但是由于包含记录的全部索引项，因此会多占用一部分内存空间</p>
<blockquote>
<p>为了易于查找，索引自身被组织成一个顺序文件</p>
</blockquote>
</li>
<li><p>部分索引（partial index）：只包含那些有感兴趣域的记录的索引项</p>
</li>
</ul>
<blockquote>
<p>对于变长记录，某些记录并不包含所有的域。向主文件中增加一条新记录时，索引文件必须全部更新。</p>
</blockquote>
</li>
</ul>
<h3 id="直接文件或散列-哈希文件（Direct-or-Hashed-File）"><a href="#直接文件或散列-哈希文件（Direct-or-Hashed-File）" class="headerlink" title="直接文件或散列/哈希文件（Direct or Hashed File）"></a>直接文件或散列/哈希文件（Direct or Hashed File）</h3><ul>
<li><p>可以直接访问磁盘中任何一个地址已知的块</p>
</li>
<li><p>每条记录中都需要一个关键域</p>
<blockquote>
<p>这里对关键域进行Hash操作，较索引文件节约空间，但是存在哈希冲突，因此查询速度要慢一些。</p>
</blockquote>
</li>
</ul>
<h2 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h2><h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><p>文件目录解决了这样一个问题：即给定一个文件名，就能够在外存中准确地访问到对应文件。</p>
<p>与任何文件管理系统和文件集合相关联的是文件目录。目录包含文件的相关信息，包括：</p>
<ul>
<li>属性（Attributes）</li>
<li>位置（Location）</li>
<li>所有权（Ownership）</li>
</ul>
<p>目录自身是一个文件，它可被各种文件管理例程访问。</p>
<blockquote>
<p>尽管用户和应用程序也可得到目录中的某些信息，但这通常是由系统例程间接提供的。</p>
</blockquote>
<p>从用户角度看，目录在用户和应用程序所知道的<strong>文件名</strong>和<strong>文件自身</strong>之间提供映射。</p>
<blockquote>
<p>每个文件项都包含文件名。</p>
</blockquote>
<blockquote>
<p>下表列出了文件目录的信息单元</p>
<p><strong>基本信息</strong></p>
<table>
<thead>
<tr>
<th>信息单元</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>文件名</td>
<td>由创建者（用户或程序）选择的名字，在同一个目录中必须是唯一的</td>
</tr>
<tr>
<td>文件类型</td>
<td>如文本文件、二进制文件、加载模块等</td>
</tr>
<tr>
<td>文件组织</td>
<td>供那些支持不同组织的系统使用</td>
</tr>
</tbody></table>
<p><strong>地址信息</strong></p>
<table>
<thead>
<tr>
<th>信息单元</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>卷</td>
<td>指示存储文件的设备</td>
</tr>
<tr>
<td>起始地址</td>
<td>文件在辅存中的起始物理地址（如在磁盘上的柱面、磁道和块号）</td>
</tr>
<tr>
<td>使用大小</td>
<td>文件的当前大小，单位为字节、字或块</td>
</tr>
<tr>
<td>分配大小</td>
<td>文件的最大尺寸</td>
</tr>
</tbody></table>
<p><strong>访问控制信息</strong></p>
<table>
<thead>
<tr>
<th>信息单元</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>所有者</td>
<td>控制文件的用户。所有者可授权或拒绝其他用户的访问，并改变给予它们的权限</td>
</tr>
<tr>
<td>访问信息</td>
<td>该单元的最简形式包括每个授权用户的用户名和口令</td>
</tr>
<tr>
<td>许可的行为</td>
<td>控制读、写、执行及在网上传送</td>
</tr>
</tbody></table>
<p><strong>使用信息</strong></p>
<table>
<thead>
<tr>
<th>信息单元</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>数据创建</td>
<td>文件首次放到目录中的时间</td>
</tr>
<tr>
<td>创建者身份</td>
<td>通常是当前所有者，但不一定必须是当前所有者</td>
</tr>
<tr>
<td>最后一次访问的日期</td>
<td>最后一次读记录的日期</td>
</tr>
<tr>
<td>最后一次读用户的身份</td>
<td>最后一次进行读的用户</td>
</tr>
<tr>
<td>最后一次修改的日期</td>
<td>最后一次修改、插入或删除的日期</td>
</tr>
<tr>
<td>最后一次修改者的身份</td>
<td>最后一次进行修改的用户</td>
</tr>
<tr>
<td>最后一次备份的日期</td>
<td>最后一次把文件备份到另一个存储介质中的日期</td>
</tr>
<tr>
<td>当前使用</td>
<td>当前文件活动的信息，如打开文件的进程、是否被一个进程加锁、文件是否在内存中被修改但未在磁盘中修改等</td>
</tr>
</tbody></table>
</blockquote>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>在介绍目录结构之前，为了理解文件结构的需求，我们可以考虑可能在目录上执行的操作：</p>
<ul>
<li>查找：用户或应用程序引用一个文件时，必须查找目录，以找到该文件相应的目录项。</li>
<li>创建文件：创建一个新文件时，必须在目录中增加一个目录项。</li>
<li>删除文件：删除一个文件时，必须在目录中删除相应的目录项。</li>
<li>显示目录：可能会请求目录的全部或部分内容。通常，这个请求是由用户发出的，用于显示该用户所拥有的所有文件和每个文件的某些属性（如类型、访问控制信息、使用信息）。</li>
<li>修改目录：由于某些文件属性保存在目录中，因而这些属性的变化需要改变相应的目录项。</li>
</ul>
<h4 id="简单目录结构"><a href="#简单目录结构" class="headerlink" title="简单目录结构"></a>简单目录结构</h4><ul>
<li><p>最简单的结构是一个目录项列表，每个文件都有一个目录项</p>
</li>
<li><p>该结构可表示最简单的顺序文件，文件名作为关键域</p>
</li>
<li><p>在组织文件的时候该结构提供不了帮助</p>
</li>
<li><p>用户在使用这种结构时需要注意不能给两个不同的文件取相同的名字（强制性的）</p>
</li>
<li><p>文件查询速度慢</p>
<blockquote>
<p>实际上若目录是一个简单的顺序列表，则它对于组织文件没有任何帮助。很难满足用户需求，尤其在共享系统中会变得更糟。</p>
</blockquote>
</li>
</ul>
<h4 id="两级目录方案"><a href="#两级目录方案" class="headerlink" title="两级目录方案"></a>两级目录方案</h4><ul>
<li><p>有一个主目录</p>
</li>
<li><p>每位用户有一个用户目录</p>
</li>
<li><p>主目录中的每一项为用户目录，并提供地址和访问控制信息</p>
</li>
<li><p>每个用户目录为简单列表文件</p>
</li>
<li><p>对构造结构化文件集合没有任何帮助</p>
</li>
<li><p>在不同的目录下，允许给文件进行相同命名</p>
</li>
<li><p>较简单目录结构加快了文件查询速度</p>
<blockquote>
<p>举例，有n个用户，每个用户有m个文件：</p>
<ul>
<li>简单目录结构：<code>(n × m) / 2</code></li>
<li>两级目录方案：<code>(n + m) / 2</code></li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="层次-树状结构目录"><a href="#层次-树状结构目录" class="headerlink" title="层次/树状结构目录"></a>层次/树状结构目录</h4><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS树状目录结构.png" style="zoom:80%;" />

<ul>
<li>有一个主目录，主目录下是许多用户目录</li>
<li>每个用户目录下又可以包含子目录的目录项和文件的目录项</li>
<li>树状结构目录降低了为文件提供唯一名称的难度</li>
</ul>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>路径名（pathname）：系统中的任何文件都可以按照从根目录或主目录向下到各个分支，最后直到该文件的路径来定位。这一系列目录名和最后到达的文件名组成了该文件的路径名。</p>
<p>文件名称可以相同，只要路径名不同就可以。</p>
<p>现假设有一个名为“<code>HuaZhu”</code>的用户目录，其包含子目录：<code>OS → Nachos → code → thread</code></p>
<p>在<code>thread</code>目录下有一个名为<code>thread.cc</code>文件，现在要定位该文件</p>
<p><strong>绝对路径</strong>：/HuaZhu/OS/Nachos/code/thread/thread.cc</p>
<p>工作目录（working directory ）：（如果要求用户在每次访问文件时都必须拼写完整的绝对路径仍比较复杂）在典型情况下，对交互用户或进程而言，总有一个当前路径与之相关联，通常称为工作目录。文件通常按相对于工作目录的方式访问，即采用相对路径。</p>
<p>现假设我正处于<code>Nachos</code>目录下，定位<code>thread.cc</code>文件</p>
<p><strong>相对路径</strong>：./code/thread/thread.cc</p>
<blockquote>
<p>绝对路径和相对路径的使用没有绝对的优劣，针对不同的使用场景有不同的选择。</p>
</blockquote>
<h2 id="文件共享"><a href="#文件共享" class="headerlink" title="文件共享"></a>文件共享</h2><p>在多用户系统中，几乎总是要求允许文件在多个用户间共享，这就会产生两个问题：</p>
<ul>
<li>访问权限</li>
<li>对同时访问的管理</li>
</ul>
<h3 id="访问权限"><a href="#访问权限" class="headerlink" title="访问权限"></a>访问权限</h3><p>下面列出了一些具有代表性的访问权限：</p>
<ul>
<li><p>无（None）：</p>
<ul>
<li>用户不知道文件是否存在</li>
<li>为了实施这种限制，不允许用户读包含该文件的用户目录</li>
</ul>
</li>
<li><p>知道（Knowledge）：</p>
<ul>
<li><p>用户仅仅可确定文件是否存在并确定其所有者</p>
<blockquote>
<p>没有更多的访问权限，当然用户可以向文件所有者申请。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>执行（Execution）：</p>
<ul>
<li><p>用户可以加载并执行一个程序，但不能复制它（看不到程序内部，即不可读文件）</p>
<blockquote>
<p>私有程序通常具有这种访问限制。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>读（Reading）：</p>
<ul>
<li><p>用户可以读文件，包括复制和执行</p>
<blockquote>
<p>有些系统还可区分浏览和复制，对于前一种情况，文件的内容可以呈现给用户，但用户却无法进行复制。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>追加（Appending）：</p>
<ul>
<li><p>用户可给文件添加数据，通常只能在末尾追加，但不能修改或删除文件的任何内容</p>
<blockquote>
<p>在许多资源中收集数据时，这种权限非常有用</p>
</blockquote>
</li>
</ul>
</li>
<li><p>更新（Updating）：</p>
<ul>
<li><p>用户可修改、删除和增加文件中的数据</p>
</li>
<li><p>通常包括最初写文件、完全重写或部分重写、移去所有或部分数据</p>
<blockquote>
<p>有些系统还区分不同程度的更新</p>
</blockquote>
</li>
</ul>
</li>
<li><p>改变保护（Changing protection ）：</p>
<ul>
<li><p>用户可改变已授给其他用户的访问权限</p>
<blockquote>
<p>通常，只有文件的所有者才具有这一权力。在某些系统中，所有者可把这项权力扩展到其他用户。为防止滥用这种机制，文件的所有者通常能指定该项权力的持有者改变哪些权限。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>删除（Deletion）：</p>
<ul>
<li>用户可从文件系统中删除该文件</li>
</ul>
</li>
</ul>
<blockquote>
<p>这些权限构成了一个层次结构，层次结构中的每个权限都隐含了前面的那些权限</p>
</blockquote>
<p>被指定为某个文件所有者的用户，通常是最初创建该文件的用户。所有者具有前面列出的全部权限，并且可给其他用户授予权限。访问可以提供给不同类型的用户：</p>
<ul>
<li>特定用户（Specific user ）：由用户ID指定的单个用户。</li>
<li>用户组（User groups ）：非单独定义的一组用户。系统必须能通过某种方式了解用户组的所有成员。</li>
<li>全部（All ）：有权访问该系统的所有用户。这些是公共文件。</li>
</ul>
<h3 id="同时访问"><a href="#同时访问" class="headerlink" title="同时访问"></a>同时访问</h3><p>如果允许多个用户追加或更新一个文件，操作系统或文件系统必须强加一些规范：</p>
<ul>
<li>在用户修改文件时，允许用户对整个文件加锁</li>
<li>更好的方案是对文件中要修改的记录进行加锁</li>
</ul>
<p>在设计共享访问能力时，必须解决互斥问题和死锁问题。</p>
<h2 id="二级存储管理（辅存管理）"><a href="#二级存储管理（辅存管理）" class="headerlink" title="二级存储管理（辅存管理）"></a>二级存储管理（辅存管理）</h2><p>在辅存中，文件是由许多块组成的。操作系统或文件管理系统负责为文件分配块。这时会引发两个管理问题：</p>
<ul>
<li>辅存中的空间必须分配给文件</li>
<li>必须知道哪些空间可用来进行分配（空闲空间管理）</li>
</ul>
<h3 id="文件分配"><a href="#文件分配" class="headerlink" title="文件分配"></a>文件分配</h3><p>文件分配涉及以下几个问题：</p>
<ul>
<li><p>创建一个新文件时，是否一次性地给它分配所需的最大空间？</p>
</li>
<li><p>给文件分配的空间是一个或多个连续的单元，这些单元称为分区。在分配文件时，分区的大小应该是多少？</p>
<blockquote>
<p>分区（portion）是一组连续的已分配块。分区的大小可以从一个块大小到整个文件大小。</p>
</blockquote>
</li>
<li><p>为跟踪分配给文件的分区，应使用哪种数据结构或表？</p>
<p>在DOS或其他系统中，这种表通常称为<strong>文件分配表（File Allocation Table，FAT）</strong></p>
</li>
</ul>
<h4 id="预分配"><a href="#预分配" class="headerlink" title="预分配"></a>预分配</h4><ul>
<li><p>要求在发出创建文件的请求时，声明该文件的最大尺寸</p>
</li>
<li><p>实际对于许多应用程序来说，可靠的预估文件的最大尺寸是有难度的</p>
</li>
<li><p>用户和应用程序会将文件尺寸估计得大一些，此时就会造成浪费</p>
<blockquote>
<p>因此采用动态分配要好一些</p>
</blockquote>
</li>
</ul>
<h4 id="分区大小"><a href="#分区大小" class="headerlink" title="分区大小"></a>分区大小</h4><ul>
<li><p>一种极端情况是：分配大到足以保存整个文件的分区</p>
<blockquote>
<p>大小可变的大规模连续分区：能提供较好的性能。大小可变避免了浪费，且会使文件分配表较小，但这又会导致空间很难再次利用。</p>
</blockquote>
</li>
<li><p>另一种极端情况是：磁盘空间一次只分配一块</p>
<blockquote>
<p>块：小的固定分区能提供更大的灵活性，但为了分配，它们可能需要较大的表或更复杂的结构。邻近性不再是主要目的，主要目的是根据需要来分配块。</p>
</blockquote>
<blockquote>
<p>因此需要折中考虑单个文件的效率和整个系统的效率，具体要考虑以下内容：</p>
<ul>
<li>邻近空间可以提高性能</li>
<li>数量较多的小分区会增加用于管理分配信息的表的大小</li>
<li>使用固定大小的分区（例如块）可以简化空间的再分配</li>
<li>使用可变大小的分区或固定大小的小分区，可减少超额分配导致的未使用存储空间的浪费</li>
</ul>
</blockquote>
</li>
</ul>
<p>下面考虑三种文件分配的方法，首先下表总结了每种方法的特点：</p>
<table>
<thead>
<tr>
<th></th>
<th>连续</th>
<th>链式</th>
<th>索引</th>
<th>索引</th>
</tr>
</thead>
<tbody><tr>
<td>是否预分配</td>
<td>需要</td>
<td>可能</td>
<td>可能</td>
<td>可能</td>
</tr>
<tr>
<td>分区大小是固定还是可变</td>
<td>可变</td>
<td>固定块</td>
<td>固定块</td>
<td>可变</td>
</tr>
<tr>
<td>分区大小</td>
<td>大</td>
<td>小</td>
<td>小</td>
<td>中</td>
</tr>
<tr>
<td>分配频率</td>
<td>一次</td>
<td>低到高</td>
<td>高</td>
<td>低</td>
</tr>
<tr>
<td>分配需要的时间</td>
<td>中</td>
<td>长</td>
<td>短</td>
<td>中</td>
</tr>
<tr>
<td>文件分配表的大小</td>
<td>一个表项</td>
<td>一个表项</td>
<td>大</td>
<td>中</td>
</tr>
</tbody></table>
<h4 id="连续分配"><a href="#连续分配" class="headerlink" title="连续分配"></a>连续分配</h4><p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E8%BF%9E%E7%BB%AD%E5%88%86%E9%85%8D%E5%9B%BE.png"></p>
<blockquote>
<p>说明：</p>
<ul>
<li>图左：连续文件分配</li>
<li>图右：连续文件分配（紧缩后）</li>
</ul>
</blockquote>
<ul>
<li><p>在创建文件时，给文件分配一组连续的块</p>
</li>
<li><p>这是一种使用大小可变分区的预分配策略</p>
</li>
<li><p>在文件分配表中，每个文件只需要一个表项，用于说明起始块和文件的长度</p>
</li>
<li><p>缺点：随着使用时长的增加，会出现外部碎片</p>
<blockquote>
<p>长时间后很难找到空间大小足够的连续块，因此需要紧缩算法来释放磁盘中的额外空间</p>
</blockquote>
</li>
</ul>
<h4 id="链式分配"><a href="#链式分配" class="headerlink" title="链式分配"></a>链式分配</h4><p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E9%93%BE%E5%BC%8F%E5%88%86%E9%85%8D%E5%9B%BE.png"></p>
<blockquote>
<p>说明：</p>
<ul>
<li>图左：链式分配</li>
<li>图右：链式分配（合并后）</li>
</ul>
</blockquote>
<ul>
<li><p>链式分配基于单个块</p>
<blockquote>
<p>连续分配与链式分配是两个极端</p>
</blockquote>
</li>
<li><p>链中的每块都包含指向下一块的指针</p>
</li>
<li><p>在文件分配表中，每个文件同样只需要一个表项，用于声明起始块和文件的长度</p>
</li>
<li><p>优势：无外部碎片。最适合顺序处理的顺序文件</p>
</li>
<li><p>缺点：局部性原理失效</p>
<blockquote>
<ul>
<li>若需要像顺序处理那样一次取入一个文件中的多个块，则需要对磁盘的不同部分进行一系列访问。这对于单用户系统有重大影响，也是共享系统需要关注的。</li>
<li>为克服这个问题，有些系统会周期性地合并文件（如图右）</li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="索引分配"><a href="#索引分配" class="headerlink" title="索引分配"></a>索引分配</h4><p><img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/OS%E7%B4%A2%E5%BC%95%E5%88%86%E9%85%8D%E5%9B%BE.png"></p>
<blockquote>
<p>说明：</p>
<ul>
<li>图左：基于块的索引分配</li>
<li>图右：基于长度可变分区的索引分配</li>
</ul>
</blockquote>
<ul>
<li><p>每个文件在文件分配表中都有一个一级索引</p>
</li>
<li><p>分配给该文件的每个分区在索引中都有一个表项</p>
</li>
<li><p>文件的索引保存在一个单独的块中，文件分配表中该文件的表项指向这一块</p>
</li>
<li><p>可以基于固定大小的块；也可以基于大小可变的分区</p>
<blockquote>
<p>基于块来分配可以消除外部碎片，而按大小可变的分区分配可以提高局部性。</p>
<p>在任何一种情况下，都需要不时地进行文件整理。在使用大小可变分区的情况下，文件整理可以减少索引的数量，但对于基于块的分配却不能减少索引的数量。</p>
</blockquote>
</li>
<li><p>支持顺序访问文件和直接访问文件，因而是最普遍的一种文件分配形式</p>
</li>
</ul>
<h3 id="空闲空间管理"><a href="#空闲空间管理" class="headerlink" title="空闲空间管理"></a>空闲空间管理</h3><p>当前还未分配给任何文件的空间同样需要管理。</p>
<p>要实现文件分配技术，首先需要知道磁盘中的哪些块是可用的，除了上述提到的文件分配表（FAT），还需要<strong>磁盘分配表（Disk Allocation Table，DAT）</strong>。</p>
<p><strong>位表（Bit tables ）</strong>：</p>
<p>这种方法使用一个向量，向量的每一位对应于磁盘中的每一块。0表示空闲块，1表示已使用块。</p>
<ul>
<li><p>优点：</p>
<ul>
<li><p>通过它能相对容易地找到一个或一组连续的空闲块。（因此位表适用于前面描述的任何一种文件分配方法）</p>
</li>
<li><p>位表非常小，但其长度仍然很长。一个块位图所需的存储器容量为：<code>磁盘大小（字节数） / （8 × 文件系统块大小</code>）</p>
<blockquote>
<p>例如：对于一个块大小为512字节的16GB磁盘，位表会占用4MB的空间。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p><strong>链式空闲区（Chained free portions）</strong>：</p>
<p>使用指向每个空闲区的指针和它们的长度值，可将空闲区链接在一起。</p>
<blockquote>
<ul>
<li>由于不需要磁盘分配表，而仅需要一个指向链的开始处的指针和第一个分区的长度，因而这种方法的空间开销可以忽略不计。</li>
<li>该方法适用于所有的文件分配方法。</li>
</ul>
</blockquote>
<h3 id="可靠性"><a href="#可靠性" class="headerlink" title="可靠性"></a>可靠性</h3><p>使用锁来防止进程间干扰和空间分配一致性。</p>
<p>请求一个文件分配时：</p>
<ol>
<li>在磁盘中对磁盘分配表加锁，以防止在分配完成前另一个用户修改这个表。</li>
<li>查找磁盘分配表，查找可用空间。这里假设磁盘分配表的副本总在内存中，若不在，则须先读入。</li>
<li>分配空间，更新磁盘分配表，更新磁盘。更新磁盘包括把磁盘分配表写回磁盘。对于链式磁盘分配，它还包括更新磁盘中的某些指针。</li>
<li>更新文件分配表和更新磁盘。</li>
<li>对磁盘分配表解锁。</li>
</ol>
<hr>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>本篇已完结</p>
<p><em>先告一段落喽，非常感谢授课老师的指导以及同学们的帮助。</em></p>
<p>（如有修改或补充欢迎评论）</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\next\2021\03\28\操作系统\操作系统学习笔记\" rel="bookmark">操作系统学习笔记</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\next\2021\06\02\操作系统\操作系统学习笔记-I-O管理和磁盘调度\" rel="bookmark">操作系统学习笔记-I/O管理和磁盘调度</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\next\2021\05\30\操作系统\操作系统学习笔记-单处理器调度\" rel="bookmark">操作系统学习笔记-单处理器调度</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\next\2021\05\24\操作系统\操作系统学习笔记-虚拟内存\" rel="bookmark">操作系统学习笔记-虚拟内存</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\next\2021\05\23\操作系统\操作系统学习笔记-内存管理\" rel="bookmark">操作系统学习笔记-内存管理</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/wechat.png" alt="花猪 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="https://cdn.jsdelivr.net/gh/CNhuazhu/Image/alipay.jpg" alt="花猪 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/next/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="fa fa-tag"></i> 操作系统</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/next/2021/06/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="prev" title="计算机网络学习笔记-网络层">
                  <i class="fa fa-chevron-left"></i> 计算机网络学习笔记-网络层
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/next/2021/06/19/%E6%95%B0%E8%AE%BA/%E6%95%B0%E8%AE%BA%E5%9F%BA%E7%A1%80%EF%BC%88%E9%83%A8%E5%88%86%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%89/" rel="next" title="数论基础（部分计算方法）">
                  数论基础（部分计算方法） <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments"><div id="twikoo-comments"></div></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">花猪</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">356k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">5:23</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/next/js/comments.js"></script><script src="/next/js/utils.js"></script><script src="/next/js/motion.js"></script><script src="/next/js/schemes/muse.js"></script><script src="/next/js/next-boot.js"></script><script src="/next/js/pjax.js"></script>

  
<script src="/next/js/third-party/search/local-search.js"></script>




  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"dh8GVAcIwU1TN4zhA5y63iW1-gzGzoHsz","app_key":"hzyAqDKjG4OBGrdPS7mKaOa7","server_url":null,"security":true}</script>
  <script src="/next/js/third-party/statistics/lean-analytics.js"></script>


  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/next/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="twikoo" type="application/json">{"enable":true,"visitor":true,"envId":"hexo-1g41404w9f800e94","el":"#twikoo-comments"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.twikoo.el)
    .then(() => NexT.utils.getScript(
      'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',
      { condition: window.twikoo }
    ))
    .then(() => {
      twikoo.init(CONFIG.twikoo);
    });
});
</script>

</body>
</html>
